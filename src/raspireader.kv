#:kivy 1.10.0
#:import os os


<RootWidget>:
  id: rootwidget
  Header:
    id: header
    HeaderButtons:
      Button:
        text: "Start"
        on_press: root.ids.pagemanager.current = "startpage"
      Button:
        text: "Options"
        on_press: root.ids.pagemanager.current = "optionspage"
      Button:
        text: "Commit"
        on_press: root.ids.pagemanager.current = "commitpage"
      Button:
        text: "Backup"
        on_press: root.ids.pagemanager.current = "backuppage"
  PageLayer:
    id: pagelayer
    PageManager:
      id: pagemanager
      StartPage:
        id: sp
        #Button:
          #text: "Print to screen"
          #on_press: root.ids.sp.print_to_screen()
      OptionsPage:
        id: op
      CommitPage:
        id: cp
      BackupPage:
        id: bp
  Footer:
    id: footer
    FooterButtons:
      Button:
        text: "hello"
        on_press: root.print_to_screen("hello")

<HeaderButtons>:
  orientation: "horizontal"
  size_hint: 1, 0.1

<Header>:
  anchor_x: "center"
  anchor_y: "top"

<PageLayer>:
  anchor_x: "center"
  anchor_y: "center"

<FooterButtons>:
  orientation: "horizontal"
  size_hint: 1, 0.1

<Footer>:
  anchor_x: "center"
  anchor_y: "bottom"

<PageManager>:
  size_hint: 1, .8

<StartPage>:
  name: "startpage"
  GridLayout:
    rows: 2
    Label:
      size_hint: 1, 0.1
      text: "Start Page"
    GridLayout:
      cols: 3
      Label:
        text: "Image"
      Label:
        text: "No Image"
      Button:
        text: "Load"
        on_release: root.file_pick()

<LoadDialog>:
  title: filechooser.path
  chossen_file: None
  BoxLayout:
    size: root.size
    pos: root.pos
    orientation: "vertical"
    FileChooserListView:
      id: filechooser
      path: os.getcwd()
    BoxLayout:
      size_hint_y: None
      height: 30
      Button:
        text: "Cancel"
        on_release: root.cancel()
      Button:
        text: "Load"
        on_release: root.load(filechooser.path, filechooser.selection)

<SaveDialog>:
  text_input: text_input
  BoxLayout:
    size: root.size
    pos: root.pos
    orientation: "vertical"
    FileChooserListView:
      id: filechooser
      path: os.getcwd()
      on_selection: test_input.text = self.selection and self.selection[0] or ''
    TextInput:
      id: text_input
      size_hint_y: None
      height: 30
      multiline: False
    BoxLayout:
      size_hint_y: None
      height: 30
      Button:
        text: "Cancel"
        on_release: root.cancel()
      Button:
        text: "Save"
        on_release: root.save(filechooser.path. text_input.text)

<OptionsPage>:
  name: "optionspage"
  Label:
    text: "Options Page"

<CommitPage>:
  name: "commitpage"
  Label:
    text: "Commit Page"

<BackupPage>:
  name: "backuppage"
  Label:
    text: "Backup Page"

